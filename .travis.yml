dist: trusty
group: beta
language: node_js
node_js:
- lts/carbon
cache:
  directories:
  - node_modules
before_install:
- npm config set //registry.npmjs.org/:_authToken=$NPM_TOKEN
- if [ -d node_modules ] && [ x$(cat node_modules/.last-node-version 2>/dev/null) != x$(node -e 'console.log(process.version)') ]; then npm rebuild --update-binary && node -e 'console.log(process.version)' > node_modules/.last-node-version; fi
deploy:
  skip_cleanup: true
  provider: npm
  email: npm@collaborne.com
  api_key:
    secure: "Bpp0m5iiTWLkUxzsKhDXyhLFJuMDuK+lCRIp0wv6vv0FXSSWpspKxouPZgvdNu2hYAwbS8i/R3x0p9pm+pfU6oiS5cqP03VlwPh+mJMaGjoEDu2B5q83/Gb6VzWOFRxjZu0C4S5MvJeQ8rTupbP/Z7+GBKAAgI0gGHOZRe/p5z1S/+OwuRNsuX4grt9YYI9r+St1f/WQexmkcW2UkkkXboD2B/cMlNZXXs1QpPiooxcmoe3pmjtCI/kQt7pk8WCkcL5yrZmNBnkeFm7ZDRrypbUSvPjpsUafgXP//3DHcRtpOA5oD7/P95jD7fANrgLj2wFUPM/H7CkW9RWYdBI8HGlwuPTTud7tGWna29v5Ufs1EPSJ2MkjnQRG/8R6QYZtcbrJb7koKRt6TVhjviT6HjYHmQMYgbfja1mG7xTgObmWlrBHIroQZwB+F6wnoD9r1uM35vgK9/4Fxk1I2WyPRqs5+8lIqK4gVFltyqc7qjuPDRkUPIZB6myIfigaSVfyvw05mHFdfl6H44kZQPS5OXPCRwa2k4l5lzsMmHJQDbdHSRWi1GnJ0JUXyitD1k9j1pL6VK78d6B0LFCsKfnBTDmAGrASw9Ae81QmSMnaeS0oyF/BctrbGXy5QS0MStvr2GDXp63wDYQgMqRwe01ZmrNoeZPCZzFEfhJ23mRNh2U="
  on:
    tags: true
    condition: $(node -e 'console.log("v" + require("./package.json").version)') = ${TRAVIS_TAG}
